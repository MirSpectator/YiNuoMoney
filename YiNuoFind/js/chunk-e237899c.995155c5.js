(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e237899c"],{"2bbd":function(t,e,a){"use strict";var s=a("6146"),o=a.n(s);o.a},6146:function(t,e,a){},b43c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header_header",{attrs:{title:"公司绑定"}}),a("toast_loading",{attrs:{show:t.loading}}),a("div",{staticClass:"i-from"},[a("div",{staticClass:"froms"},[a("van-field",{attrs:{name:"radio",label:"绑定信息"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.radioChange},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("van-radio",{attrs:{name:"1"}},[t._v("绑定公司")]),a("van-radio",{attrs:{name:"2"}},[t._v("新建公司")])],1)]},proxy:!0}])}),a("van-form",{directives:[{name:"show",rawName:"v-show",value:t.userShow,expression:"userShow"}]},[a("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"请输入手机号"},model:{value:t.user.user_phone,callback:function(e){t.$set(t.user,"user_phone",e)},expression:"user.user_phone"}}),a("van-field",{attrs:{name:"验证码",label:"验证码",placeholder:"请输入验证码"},model:{value:t.user.code,callback:function(e){t.$set(t.user,"code",e)},expression:"user.code"}}),a("div",{staticClass:"time",class:{canClick:!t.canClick},on:{click:t.gotime}},[t._v(t._s(t.msgPhone))])],1),a("van-form",{directives:[{name:"show",rawName:"v-show",value:t.pwdShow,expression:"pwdShow"}]},[a("van-field",{attrs:{name:"新建公司",label:"新建公司",placeholder:"请输入公司名称"},model:{value:t.not.company_name,callback:function(e){t.$set(t.not,"company_name",e)},expression:"not.company_name"}}),a("van-field",{attrs:{name:"信用代码",label:"信用代码",placeholder:"信用代码"},model:{value:t.not.company_credit,callback:function(e){t.$set(t.not,"company_credit",e)},expression:"not.company_credit"}})],1),a("div",{staticStyle:{margin:"16px"}},[a("submit_submit",{attrs:{text:"保存"},on:{click:t.submitG}})],1)],1)])],1)},o=[],i={name:"bind_this",data:function(){return{radio:"1",user:{user_phone:"",code:"",msgId:"",user_id:""},not:{company_name:"",company_credit:"",user_id:""},userShow:!0,pwdShow:!1,msgPhone:"发送验证码",totalTime:60,canClick:!0,loading:!1}},created:function(){this.fun()},methods:{fun:function(){var t="";if(console.log("注册："+sessionStorage.getItem("user_id")),console.log("登录："+sessionStorage.getItem("user")),null!==sessionStorage.getItem("user")){var e=JSON.parse(sessionStorage.getItem("user"))[0].user_id;t+=e,console.log("login："+e)}else if(null!==sessionStorage.getItem("user_id")){var a=JSON.parse(sessionStorage.getItem("user_id")).user_id;t+=a,console.log("注册："+a)}this.user.user_id=t,this.not.user_id=t},radioChange:function(t){1==t?(this.userShow=!0,this.pwdShow=!1):2==t&&(this.userShow=!1,this.pwdShow=!0)},submitG:function(){var t=this;if(1==this.radio){var e=!0,a=/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,s=/^[0-9]*$/;if(""==this.user.user_phone)return this.$toast({position:"bottom",message:"手机号不能为空"}),e=!1,!1;if(!a.test(this.user.user_phone))return this.$toast({position:"bottom",message:"手机格式出错"}),e=!1,!1;if(""==this.user.code)return this.$toast({position:"bottom",message:"验证码不能为空"}),e=!1,!1;if(!s.test(this.user.code))return this.$toast({position:"bottom",message:"验证码格式有误"}),e=!1,!1;var o=JSON.stringify(this.user),i={jsonUser:o};this.loading=e,this.$addtitle("company/already_Company.po",i).then((function(e){200===e.status&&(t.loading=!1,void 0!=e.data.data||null!=e.data.data||""!=e.data.data?(t.$toast.success("绑定成功"),sessionStorage.setItem("company_id",e.data.data),t.$store.commit("company_id",e.data.data),t.$router.push({name:"home"})):(t.$toast.fail("绑定失败"),t.loading=!1))})).catch((function(e){t.$toast.fail("数据异常")}))}else if(2==this.radio){var n=!0,r=/^[\u4E00-\u9FA5]{2,10}$/;if(""==this.not.company_name)return this.$toast({position:"bottom",message:"新建公司不能为空"}),n=!1,!1;if(!r.test(this.not.company_name))return this.$toast({position:"bottom",message:"新建公司格式有误"}),n=!1,!1;var d=JSON.stringify(this.not),c={jsonCompany:d};this.loading=n,this.$addtitle("company/new_Company.po",c).then((function(e){200===e.status&&(t.loading=!1,void 0!=e.data.data||null!=e.data.data||""!=e.data.data?(t.$toast.success("创建成功"),sessionStorage.setItem("company_id",e.data.data),t.$store.commit("company_id",e.data.data),t.$router.push({name:"home"})):t.$toast.fail("绑定失败"))})).catch((function(e){t.this.loading=!1,t.$toast.fail("数据异常")}))}},gotime:function(){var t=this;if(this.canClick){this.axios.get("user/code.po?phone="+this.user.user_phone).then((function(e){t.user.msgId=e.data.data})),this.canClick=!1,this.msgPhone=this.totalTime+"s后重新发送";var e=window.setInterval((function(){t.totalTime--,t.msgPhone=t.totalTime+"s后重新发送",t.totalTime<0&&(window.clearInterval(e),t.msgPhone="重新发送验证码",t.totalTime=60,t.canClick=!0)}),1e3)}}}},n=i,r=(a("2bbd"),a("2877")),d=Object(r["a"])(n,s,o,!1,null,"2b906539",null);e["default"]=d.exports}}]);