(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d92b498"],{1147:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"receivable_money"},[a("header_header",{attrs:{title:"应收应付录入"}}),a("toast_loading",{attrs:{show:t.loadding}}),a("title_header",{attrs:{title_header:"应收应付录入",title_header_one:"Receivablepayableentry"}}),a("div",{staticClass:"btn"},[a("van-field",{attrs:{name:"radio",label:"类型"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.typeof_change},model:{value:t.typeOfValue,callback:function(e){t.typeOfValue=e},expression:"typeOfValue"}},t._l(t.type_list,(function(e,n){return a("van-radio",{key:n,attrs:{name:e.radio}},[t._v(t._s(e.text))])})),1)]},proxy:!0}])})],1),a("van-form",{on:{submit:t.add}},[a("site_people",{attrs:{labe:"工地名称",place:"请输入工地名称"},on:{site_peoples:t.siteId},model:{value:t.site,callback:function(e){t.site=e},expression:"site"}}),a("people",{directives:[{name:"show",rawName:"v-show",value:t.receivable_show,expression:"receivable_show"}],attrs:{peopleLabel:"债务人",placePeople:"请输入债务人"},on:{peopleList:t.peopleID},model:{value:t.fund_debtor,callback:function(e){t.fund_debtor=e},expression:"fund_debtor"}}),a("people",{directives:[{name:"show",rawName:"v-show",value:t.time_show,expression:"time_show"}],attrs:{peopleLabel:"债权人",placePeople:"请输入债权人"},on:{peopleList:t.fund_personID},model:{value:t.fund_person,callback:function(e){t.fund_person=e},expression:"fund_person"}}),a("van-field",{attrs:{readonly:"",clickable:"",name:"name",value:t.fund_detail_name,label:"相关项目",placeholder:"点击选择相关项目"},on:{click:function(e){t.fund_detail_idClick=!0}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.fund_detail_idClick,callback:function(e){t.fund_detail_idClick=e},expression:"fund_detail_idClick"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.Radiocolumns,"value-key":"fund_name"},on:{confirm:t.RadioConfirm,cancel:function(e){t.fund_detail_idClick=!1}}})],1),a("van-field",{attrs:{readonly:"",clickable:"",name:"款项名称",value:t.detailed,label:"款项名称",placeholder:"点击选择款项名称"},on:{click:function(e){t.detailedClick=!0}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.detailedClick,callback:function(e){t.detailedClick=e},expression:"detailedClick"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.detailedcolumns,"value-key":"fund_name"},on:{confirm:t.detailedConfirm,cancel:function(e){t.detailedClick=!1}}})],1),a("van-field",{directives:[{name:"show",rawName:"v-show",value:t.slimShow,expression:"slimShow"}],attrs:{readonly:"",clickable:"",name:"款项详细",value:t.slim,label:"款项详细",placeholder:"点击选择款项详细"},on:{click:function(e){t.slimClick=!0}}}),a("van-popup",{attrs:{position:"bottom"},model:{value:t.slimClick,callback:function(e){t.slimClick=e},expression:"slimClick"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.slimcolumns,"value-key":"fund_name"},on:{confirm:t.slimConfirm,cancel:function(e){t.slimClick=!1}}})],1),a("van-field",{attrs:{name:"radio",label:"级别"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.level_a_b_c,callback:function(e){t.level_a_b_c=e},expression:"level_a_b_c"}},t._l(t.list_level,(function(e,n){return a("van-radio",{key:n,attrs:{name:e.text}},[t._v(t._s(e.text))])})),1)]},proxy:!0}])}),a("van-field",{attrs:{name:"radio",label:"情况"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.happening,callback:function(e){t.happening=e},expression:"happening"}},t._l(t.list_happening,(function(e,n){return a("van-radio",{key:n,attrs:{name:e.radio}},[t._v(t._s(e.text))])})),1)]},proxy:!0}])}),a("van-field",{attrs:{label:"金额",placeholder:"请输入金额"},model:{value:t.fund_money,callback:function(e){t.fund_money=e},expression:"fund_money"}}),a("van-field",{attrs:{name:"radio",label:"付款类型"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.paymentChange},model:{value:t.payment,callback:function(e){t.payment=e},expression:"payment"}},t._l(t.list_payment,(function(e,n){return a("van-radio",{key:n,attrs:{name:e.text}},[t._v(t._s(e.text))])})),1)]},proxy:!0}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.list_data_time,expression:"list_data_time"}],staticClass:"list_data_time"},[a("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0"}},[a("tr",[a("th",[a("span",[t._v("日期")])]),a("th",[a("span",[t._v("批次")])]),a("th",[a("span",[t._v("金额")])]),a("th",[a("span",[t._v("备注")])])]),t._l(t.list_data,(function(e,n){return a("tr",{key:n},[a("td",[a("span",[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{input:function(a){return t.fund_date(e)}},model:{value:e.fund_detail_date,callback:function(a){t.$set(e,"fund_detail_date",a)},expression:"item.fund_detail_date"}})],1)]),a("td",[a("span",[a("van-field",{attrs:{placeholder:"批次"},model:{value:e.fund_detail_batch,callback:function(a){t.$set(e,"fund_detail_batch",a)},expression:"item.fund_detail_batch"}})],1)]),a("td",[a("span",[a("van-field",{attrs:{placeholder:"￥"},model:{value:e.fund_detail_money,callback:function(a){t.$set(e,"fund_detail_money",a)},expression:"item.fund_detail_money"}})],1)]),a("td",[a("span",[a("van-field",{attrs:{placeholder:"备注"},on:{input:function(a){return t.fund_text(e)}},model:{value:e.fund_detail_text,callback:function(a){t.$set(e,"fund_detail_text",a)},expression:"item.fund_detail_text"}})],1)])])}))],2),a("p",{attrs:{id:"btn-form"},on:{click:t.formAdd}},[t._v("添加新一行")]),a("p",{attrs:{id:"btn-del"},on:{click:function(e){return t.del(t.list_data)}}},[t._v("删除")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.zhouq,expression:"zhouq"}]},[a("van-cell-group",{staticClass:"data_time"},[a("label",[t._v("还款时间")]),a("el-date-picker",{staticClass:"data_data",attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.list_zhou,callback:function(e){t.list_zhou=e},expression:"list_zhou"}})],1),a("van-field",{attrs:{name:"radio",label:"还款周期"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.list_data_radio_change},model:{value:t.cycle_list,callback:function(e){t.cycle_list=e},expression:"cycle_list"}},t._l(t.cycle_list_data,(function(e,n){return a("van-radio",{key:n,attrs:{name:e.text}},[t._v(t._s(e.text))])})),1)]},proxy:!0}])}),a("van-field",{attrs:{type:"number",label:"还款期数",placeholder:"请输入还款期数"},model:{value:t.time_data,callback:function(e){t.time_data=e},expression:"time_data"}})],1),a("div",{staticStyle:{margin:"16px"}},[a("submit_submit",{attrs:{text:"保存"}})],1)],1)],1)},i=[],d=(a("99af"),a("c975"),a("d81d"),a("a434"),a("d3b7"),a("25f0"),{name:"Receivablepayable_entry",data:function(){return{loadding:!1,radio:"储蓄卡",typeOfValue:"1",type_list:[{text:"应收",radio:"1"},{text:"应付",radio:"2"}],site:"",fund_debtor:"",fund_person:"",fund_detail_name:"公司",Radiocolumns:[],detailed:"",detailedcolumns:[],slim:"",slimcolumns:[],fund_money:"",happening:"",level_a_b_c:"",payment:"阶段付款",entry:{customer_id:"",fund_person_id:"",fund_name_id:"1",fund_detail_level:"",fund_detail_type:"",fund_money:"",fund_type:"阶段付款",company_id:0},handle:{customer_id:"",fund_person_id:"",fund_name_id:"1",fund_type:"阶段付款",fund_money:"",fund_detail_level:"",fund_detail_type:"",company_id:0},list_level:[{text:"A"},{text:"B "},{text:"C "}],list_happening:[{radio:"0",text:"是"},{radio:"1",text:"否"}],list_payment:[{text:"阶段付款"},{text:"周期付款"}],list_data:[{fund_detail_date:"",fund_detail_batch:"1".toString(),fund_detail_money:"",fund_detail_text:"",fund_text:"",fund_date:""}],batch_index:1,list_zhou:"",cycle_list:"",time_data:"",cycle_list_data:[{text:"按月"},{text:"按年"},{text:"按周"}],fund_detail_idClick:!1,detailedClick:!1,slimClick:!1,slimShow:!1,list_data_time:!0,zhouq:!1,time_show:!1,receivable_show:!0}},created:function(){this.fundList()},methods:{siteId:function(t,e){this.site=t,this.entry.customer_id=e,this.handle.customer_id=e},peopleID:function(t,e){this.fund_debtor=t,this.entry.fund_person_id=e},fund_personID:function(t,e){this.fund_person=t,this.handle.fund_person_id=e},paymentChange:function(t){this.entry.fund_type=t,this.handle.fund_type=t,"阶段付款"===t?(this.list_data_time=!0,this.zhouq=!1):(this.list_data_time=!1,this.zhouq=!0)},formAdd:function(){this.batch_index++;var t={fund_detail_date:"",fund_detail_batch:"1".toString(),fund_detail_money:"",fund_detail_text:"",fund_text:"",fund_date:""};t.fund_detail_batch=this.batch_index.toString(),this.list_data.push(t)},del:function(t){this.batch_index--,0===this.list_data.length?this.$toast.fail("没有可删除的了"):this.list_data.splice(this.list_data.indexOf(t),1)},fund_date:function(t){for(var e in this.list_data)t===this.list_data[e]&&(this.list_data[e].fund_date=this.time(this.list_data[e].fund_detail_date))},fund_text:function(t){for(var e in this.list_data)t===this.list_data[e]&&(this.list_data[e].fund_text=this.list_data[e].fund_detail_text)},list_data_change:function(t){this.list_zhou=this.$time(t)},list_data_radio_change:function(t){this.cycle_list=t},RadioConfirm:function(t){var e=this;this.fund_detail_name=t.fund_name,this.entry.fund_name_id=t.id,this.handle.fund_name_id=t.id,this.fund_detail_idClick=!1,this.fundList_two(t.id).then((function(t){t.data.data.length>0&&(e.detailedcolumns=t.data.data,e.slimShow=!1,e.slim="",e.detailed="")}))},detailedConfirm:function(t){var e=this;this.detailed=t.fund_name,this.entry.fund_name_id=t.id,this.handle.fund_name_id=t.id,this.detailedClick=!1,this.fundList_two(t.id).then((function(t){"无数据"==t.data.data?e.slimShow=!1:(e.slimShow=!0,e.slimcolumns=t.data.data)}))},slimConfirm:function(t){this.slim=t.fund_name,this.entry.fund_name_id=t.id,this.handle.fund_name_id=t.id,this.slimClick=!1},fundList_two:function(t){var e=this;return new Promise((function(a,n){e.$moneyGet("fund/select_fundName.po?fund_stale=0&parentid="+t).then((function(t){a(t)})).catch((function(t){n(t)}))}))},fundList:function(){var t=this;this.loadding=!0,this.$moneyGet("fund/select_fundName.po?fund_stale=0&level=1").then((function(e){200===e.status&&(t.loadding=!1,t.Radiocolumns=e.data.data,e.data.data.length>0&&t.fundList_two(3).then((function(e){t.detailedcolumns=e.data.data})))}))},typeof_change:function(t){"1"===t?(this.receivable_show=!0,this.time_show=!1):"2"===t&&(this.receivable_show=!1,this.time_show=!0)},time:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0"+n);var i=e.getDate();return i<10&&(i="0"+i),"".concat(a,"-").concat(n,"-").concat(i)},add:function(){var t=this;this.list_data;if("阶段付款"===this.entry.fund_type)"1"===this.typeOfValue||"2"===this.typeOfValue&&this.list_data.map((function(t){t.fund_detail_money=-1*t.fund_detail_money}));else if("周期付款"===this.entry.fund_type){var e,a=new Date(this.list_zhou),n=this.cycle_list,i=this.time_data;if("1"===this.typeOfValue)e=this.fund_money/i;else if("2"===this.typeOfValue){var d=this.fund_money/i;e=-1*d}var l="";if(this.list_data=[],"按月"===n)for(var o=0;o<=i-1;o++){var s=a.getFullYear(),r=a.getMonth()+1+o;r<10&&(r="0"+r);var c=a.getDate();c<10&&(c="0"+c);var u=a.getHours();u<10&&(u="0"+u);var _=a.getMinutes();_<10&&(_="0"+_);var f=a.getSeconds();f<10&&(f="0"+f),l="".concat(s,"-").concat(r,"-").concat(c," ").concat(u,":").concat(_,":").concat(f);var h={fund_detail_date:l,fund_detail_money:e.toString(),fund_detail_batch:o.toString(),fund_detail_text:""};this.list_data.push(h)}else if("按年"===n)for(var p=0;p<=i-1;p++){var m=a.getFullYear()+p,v=a.getMonth()+1;v<10&&(v="0"+v);var y=a.getDate();y<10&&(y="0"+y);var b=a.getHours();b<10&&(b="0"+b);var g=a.getMinutes();g<10&&(g="0"+g);var x=a.getSeconds();x<10&&(x="0"+x),l="".concat(m,"-").concat(v,"-").concat(y," ").concat(b,":").concat(g,":").concat(x);var k={fund_detail_date:l,fund_detail_money:e.toString(),fund_detail_batch:p.toString(),fund_detail_text:""};this.list_data.push(k)}else if("按周"===n)for(var w=0;w<=i-1;w++){var C=a.getFullYear(),S=a.getMonth()+1;a.setDate(a.getDate()+7),S<10&&(S="0"+S);var O=a.getDate();O<10&&(O="0"+O);var $=a.getHours();$<10&&($="0"+$);var z=a.getMinutes();z<10&&(z="0"+z);var R=a.getSeconds();R<10&&(R="0"+R),l="".concat(C,"-").concat(S,"-").concat(O," ").concat($,":").concat(z,":").concat(R);var D={fund_detail_date:l,fund_detail_money:e.toString(),fund_detail_batch:w.toString(),fund_detail_text:""};this.list_data.push(D)}}this.loadding=!0,"1"===this.typeOfValue?(this.entry.fund_money=this.fund_money,this.entry.fund_detail_type=this.happening,this.entry.fund_detail_level=this.level_a_b_c,this.recivalble_add(this.entry,this.list_data).then((function(e){t.loadding=!1,200===e.status&&("添加成功"===e.data.data?(t.$toast.success(e.data.data),t.$router.push({name:"receivable_money"})):t.$toast.fail(e.data.data))})).catch((function(e){t.$toast.fail(res.data.data),t.loadding=!1}))):"2"===this.typeOfValue&&(this.handle.fund_money=-1*this.fund_money,this.handle.fund_detail_type=this.happening,this.handle.fund_detail_level=this.level_a_b_c,this.recivalble_add(this.handle,this.list_data).then((function(e){t.loadding=!1,200===e.status&&("添加成功"===e.data.data?(t.$toast.success(e.data.data),t.$router.push({name:"receivable_money"})):t.$toast.fail(e.data.data))})).catch((function(e){t.$toast.fail(res.data.data),t.loadding=!1})))},recivalble_add:function(t,e){var a=this,n=JSON.stringify(t),i=JSON.stringify(e);return new Promise((function(t,e){a.axios({method:"POST",url:"fund/beforehand_Out_Enter.po",headers:{"Content-Type":"application/x-www-form-urlencoded;"},data:{jsonFund:n,jsonfund_detail:i},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}]}).then((function(e){t(e)})).catch((function(t){e(t)}))}))}}}),l=d,o=(a("417a"),a("2877")),s=Object(o["a"])(l,n,i,!1,null,"1d4bc60e",null);e["default"]=s.exports},"25f0":function(t,e,a){"use strict";var n=a("6eeb"),i=a("825a"),d=a("d039"),l=a("ad6d"),o="toString",s=RegExp.prototype,r=s[o],c=d((function(){return"/a/b"!=r.call({source:"a",flags:"b"})})),u=r.name!=o;(c||u)&&n(RegExp.prototype,o,(function(){var t=i(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?l.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"417a":function(t,e,a){"use strict";var n=a("d735"),i=a.n(n);i.a},a434:function(t,e,a){"use strict";var n=a("23e7"),i=a("23cb"),d=a("a691"),l=a("50c4"),o=a("7b0b"),s=a("65f0"),r=a("8418"),c=a("1dde"),u=a("ae40"),_=c("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!_||!f},{splice:function(t,e){var a,n,c,u,_,f,y=o(this),b=l(y.length),g=i(t,b),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=b-g):(a=x-2,n=p(h(d(e),0),b-g)),b+a-n>m)throw TypeError(v);for(c=s(y,n),u=0;u<n;u++)_=g+u,_ in y&&r(c,u,y[_]);if(c.length=n,a<n){for(u=g;u<b-n;u++)_=u+n,f=u+a,_ in y?y[f]=y[_]:delete y[f];for(u=b;u>b-n+a;u--)delete y[u-1]}else if(a>n)for(u=b-n;u>g;u--)_=u+n-1,f=u+a-1,_ in y?y[f]=y[_]:delete y[f];for(u=0;u<a;u++)y[u+g]=arguments[u+2];return y.length=b-n+a,c}})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},c975:function(t,e,a){"use strict";var n=a("23e7"),i=a("4d64").indexOf,d=a("a640"),l=a("ae40"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,r=d("indexOf"),c=l("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:s||!r||!c},{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},d735:function(t,e,a){}}]);